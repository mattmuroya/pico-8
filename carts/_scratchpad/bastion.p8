pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- utils

function log(input)
	printh("> "..tostr(input))
end
-->8
-- init

function _init()
	mouse_x=0
	mouse_y=0
	poke(0x5f2d,1)
	cls(7)
	tilemap={
		{1,1,1,0,0,0,1,1},
		{0,0,1,0,1,1,1,0},
		{0,0,1,0,1,0,0,0},
		{1,1,1,0,1,1,1,1},
		{1,0,1,1,1,0,0,1},
		{1,0,0,0,1,0,1,1},
		{1,1,1,1,1,0,0,1},
		{1,0,0,0,1,0,0,1},
	}
	wait={30,45,60,75,90,105,120,135}
end

-->8
-- update

function _update()
	-- get mouse
	mouse_x=stat(32)
	mouse_y=stat(33)
	--shrink
	for i=1,8 do
		if wait[9-i]<=0 then
			for j=1,8 do
				if tilemap[i][j]>0 then
					tilemap[i][j]-=0.05
				end
			end
		else
			wait[9-i]-=1
		end
	end
end
-->8
-- draw

function _draw()
	cls(7)
	print_tiles()
	display_cursor()
end

function print_tiles()
	for i=1,8 do
		for j=1,8 do
			local scale=tilemap[i][j]
			if scale>0 then
				sspr(8,0,16,22,
					-- tile's center coordinate minus half its dimensions
					-- tile's min y coord plus up to 2x height as scale decreases
					(j*16-8) - 16*scale/2,
					(i-1)*16 + (1-scale)*44,
					16*scale,
					22*scale
				)
			end
		end
	end
end

function display_cursor()
	pal(7,14)
	print(mouse_x..", "..mouse_y,1,1,7)
	spr(0,mouse_x-4,mouse_y-4)
	pal()
end
__gfx__
00000000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005bbb55555555bbb500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007005b555555555555b500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770005b555555555555b500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005b555555555555b500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005b555555555555b500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005bbb55555555bbb500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006d6d6d6d6d6d6d6d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000dddddddddddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000d1d1d1d1d1d1d1d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
